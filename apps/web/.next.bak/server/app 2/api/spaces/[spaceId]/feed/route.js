"use strict";(()=>{var a={};a.id=6870,a.ids=[6870],a.modules={261:a=>{a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3893:(a,b,c)=>{c.d(b,{A:()=>e});let d={enabled:!1,level:"normal",hideFromDirectory:!1,hideActivity:!1,hideSpaceMemberships:!1,hideLastSeen:!1,hideOnlineStatus:!1,hideFromSearch:!1};class e{static getSettings(a){let b=a.ghostMode,c=a.visibility;return b?.enabled?{enabled:b.enabled,level:b.level??"normal",hideFromDirectory:b.hideFromDirectory??c?.showInDirectory===!1,hideActivity:b.hideActivity??c?.showActivity===!1,hideSpaceMemberships:b.hideSpaceMemberships??!1,hideLastSeen:b.hideLastSeen??!1,hideOnlineStatus:b.hideOnlineStatus??!1,hideFromSearch:b.hideFromSearch??b.hideFromDirectory??!1}:d}static shouldHideFromDirectory(a,b,c){let d=this.getSettingsFromUser(a);return!!d.enabled&&!!d.hideFromDirectory&&this.applyVisibilityRules(d,a.id,b,c)}static shouldHideActivity(a,b,c){let d=this.getSettingsFromUser(a);return!!d.enabled&&!!d.hideActivity&&this.applyVisibilityRules(d,a.id,b,c)}static shouldHideFromSearch(a,b,c){let d=this.getSettingsFromUser(a);return!!d.enabled&&(!!d.hideFromSearch||!!d.hideFromDirectory)&&this.applyVisibilityRules(d,a.id,b,c)}static shouldHideSpaceMemberships(a,b){let c=this.getSettingsFromUser(a);return!!c.enabled&&!!c.hideSpaceMemberships&&b.userId!==a.id&&!b.isAdmin}static shouldHideOnlineStatus(a,b){let c=this.getSettingsFromUser(a);return!!c.enabled&&!!c.hideOnlineStatus&&b.userId!==a.id}static shouldHideLastSeen(a,b){let c=this.getSettingsFromUser(a);return!!c.enabled&&!!c.hideLastSeen&&b.userId!==a.id}static filterUsers(a,b,c,d){return a.filter(a=>{let e=d?.(a.id);switch(c){case"directory":return!this.shouldHideFromDirectory(a,b,e);case"search":return!this.shouldHideFromSearch(a,b,e);case"activity":return!this.shouldHideActivity(a,b,e);default:return!0}})}static getLevelPreset(a){switch(a){case"invisible":return{hideFromDirectory:!0,hideActivity:!0,hideSpaceMemberships:!0,hideLastSeen:!0,hideOnlineStatus:!0,hideFromSearch:!0};case"minimal":return{hideFromDirectory:!1,hideActivity:!0,hideSpaceMemberships:!1,hideLastSeen:!0,hideOnlineStatus:!0,hideFromSearch:!1};case"selective":return{hideFromDirectory:!1,hideActivity:!1,hideSpaceMemberships:!1,hideLastSeen:!0,hideOnlineStatus:!1,hideFromSearch:!1};default:return{hideFromDirectory:!1,hideActivity:!1,hideSpaceMemberships:!1,hideLastSeen:!1,hideOnlineStatus:!1,hideFromSearch:!1}}}static getSettingsFromUser(a){return a.ghostMode?.enabled?{enabled:a.ghostMode.enabled,level:a.ghostMode.level??"normal",hideFromDirectory:a.ghostMode.hideFromDirectory??!1,hideActivity:a.ghostMode.hideActivity??!1,hideSpaceMemberships:a.ghostMode.hideSpaceMemberships??!1,hideLastSeen:a.ghostMode.hideLastSeen??!1,hideOnlineStatus:a.ghostMode.hideOnlineStatus??!1,hideFromSearch:a.ghostMode.hideFromSearch??a.ghostMode.hideFromDirectory??!1}:d}static applyVisibilityRules(a,b,c,d){if(c.userId===b||c.isAdmin)return!1;switch(a.level){case"invisible":return!0;case"minimal":if(d&&d.length>0)return!1;return!c.memberOfSpaceIds.some(a=>c.memberOfSpaceIds.includes(a));case"selective":if(d&&d.length>=2)return!1;return!0;default:return!1}}}},4573:a=>{a.exports=require("node:buffer")},7879:a=>{a.exports=import("firebase-admin/firestore")},10846:a=>{a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:a=>{a.exports=import("firebase-admin/auth")},19121:a=>{a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19367:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{handler:()=>x,patchFetch:()=>w,routeModule:()=>y,serverHooks:()=>B,workAsyncStorage:()=>z,workUnitAsyncStorage:()=>A});var e=c(98128),f=c(48869),g=c(78868),h=c(37526),i=c(21884),j=c(261),k=c(24218),l=c(73640),m=c(66376),n=c(36363),o=c(73605),p=c(76583),q=c(19465),r=c(78910),s=c(86439),t=c(48724),u=c(83341),v=a([u]);u=(v.then?(await v)():v)[0];let y=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/api/spaces/[spaceId]/feed/route",pathname:"/api/spaces/[spaceId]/feed",filename:"route",bundlePath:"app/api/spaces/[spaceId]/feed/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"/Users/laneyfraass/Desktop/HIVE/apps/web/src/app/api/spaces/[spaceId]/feed/route.ts",nextConfigOutput:"",userland:u}),{workAsyncStorage:z,workUnitAsyncStorage:A,serverHooks:B}=y;function w(){return(0,g.patchFetch)({workAsyncStorage:z,workUnitAsyncStorage:A})}async function x(a,b,c){var d;let e="/api/spaces/[spaceId]/feed/route";"/index"===e&&(e="/");let g=await y.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!g)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:u,params:v,nextConfig:w,isDraftMode:x,prerenderManifest:z,routerServerContext:A,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,resolvedPathname:D}=g,E=(0,j.normalizeAppPath)(e),F=!!(z.dynamicRoutes[E]||z.routes[D]);if(F&&!x){let a=!!z.routes[D],b=z.dynamicRoutes[E];if(b&&!1===b.fallback&&!a)throw new s.NoFallbackError}let G=null;!F||y.isDev||x||(G=D,G="/index"===G?"/":G);let H=!0===y.isDev||!F,I=F&&!H,J=a.method||"GET",K=(0,i.getTracer)(),L=K.getActiveScopeSpan(),M={params:v,prerenderManifest:z,renderOpts:{experimental:{cacheComponents:!!w.experimental.cacheComponents,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>y.onRequestError(a,b,d,A)},sharedContext:{buildId:u}},N=new k.NodeNextRequest(a),O=new k.NodeNextResponse(b),P=l.NextRequestAdapter.fromNodeNextRequest(N,(0,l.signalFromNodeResponse)(b));try{let d=async c=>y.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),g=async g=>{var i,j;let k=async({previousCacheEntry:f})=>{try{if(!(0,h.getRequestMeta)(a,"minimalMode")&&B&&C&&!f)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(g);a.fetchMetrics=M.renderOpts.fetchMetrics;let i=M.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=M.renderOpts.collectedTags;if(!F)return await (0,o.I)(N,O,e,M.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,p.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[r.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=r.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=r.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:t.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==f?void 0:f.isStale)&&await y.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})},A),b}},l=await y.handleResponse({req:a,nextConfig:w,cacheKey:G,routeKind:f.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:z,isRoutePPREnabled:!1,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,responseGenerator:k,waitUntil:c.waitUntil});if(!F)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==t.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,h.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",B?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),x&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,p.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,h.getRequestMeta)(a,"minimalMode")&&F||m.delete(r.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,q.getCacheControlHeader)(l.cacheControl)),await (0,o.I)(N,O,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};L?await g(L):await K.withPropagatedContext(a.headers,()=>K.trace(m.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:i.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},g))}catch(b){if(b instanceof s.NoFallbackError||await y.onRequestError(a,b,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})}),F)throw b;return await (0,o.I)(N,O,new Response(null,{status:500})),null}}d()}catch(a){d(a)}})},29294:a=>{a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},37962:(a,b,c)=>{function d(a){if(!0===a.isHidden||!0===a.isDeleted)return!0;let b=a.status;if("hidden"===b||"removed"===b||"flagged"===b)return!0;let c=a.moderationStatus;return"removed"===c||"hidden"===c}function e(a){let b=a.status,c=a.moderationStatus;if("flagged"===b||"flagged"===c||"pending_review"===c)return!d(a);let e=a.flagCount;return!!e&&e>0&&!d(a)}function f(a){if(!0===a.isDeleted)return"removed";if(!0===a.isHidden)return"hidden";let b=a.status;if("removed"===b)return"removed";if("hidden"===b)return"hidden";if("flagged"===b)return"flagged";let c=a.moderationStatus;return"removed"===c?"removed":"hidden"===c?"hidden":"flagged"===c?"flagged":"pending_review"===c?"pending_review":"visible"}function g(a,b,c){let d=new Date().toISOString(),e={updatedAt:new Date,lastModeratedAt:d,lastModeratedBy:b};switch(c&&(e.moderationReason=c),a){case"hide":return{...e,isHidden:!0,moderationStatus:"hidden",hiddenAt:d,hiddenBy:b};case"unhide":return{...e,isHidden:!1,moderationStatus:"visible",unhiddenAt:d,unhiddenBy:b};case"remove":return{...e,isDeleted:!0,moderationStatus:"removed",deletedAt:d,deletedBy:b};case"restore":return{...e,isDeleted:!1,isHidden:!1,moderationStatus:"visible",restoredAt:d,restoredBy:b};case"flag":return{...e,moderationStatus:"flagged",flaggedAt:d,flaggedBy:b};case"unflag":return{...e,moderationStatus:"visible",unflaggedAt:d,unflaggedBy:b};case"approve":return{...e,moderationStatus:"visible",approvedAt:d,approvedBy:b};default:return e}}c.d(b,{P3:()=>f,QE:()=>d,WK:()=>e,ij:()=>g})},44870:a=>{a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},46675:a=>{a.exports=require("firebase-admin")},55511:a=>{a.exports=require("crypto")},56990:(a,b,c)=>{c.d(b,{o:()=>e});var d=c(77745);class e extends d.r{get userId(){return this.props.userId}get campusId(){return this.props.campusId}get type(){return this.props.type}get isAdmin(){return this.props.isAdmin}get isModerator(){return this.props.isModerator}get connectionIds(){return this.props.connectionIds}get memberOfSpaceIds(){return this.props.memberOfSpaceIds}get isAuthenticated(){return null!==this.props.userId}constructor(a){super(a)}static anonymous(a){return new e({userId:null,campusId:a,type:"anonymous",isAdmin:!1,isModerator:!1,connectionIds:[],memberOfSpaceIds:[]})}static authenticated(a){let b=a.isAdmin??!1,c=a.isModerator??!1,d="authenticated";return b?d="admin":c&&(d="moderator"),new e({userId:a.userId,campusId:a.campusId,type:d,isAdmin:b,isModerator:c,connectionIds:a.connectionIds??[],memberOfSpaceIds:a.memberOfSpaceIds??[]})}static fromAuthContext(a,b){return e.authenticated({userId:a.userId,campusId:a.campusId??"ub-buffalo",isAdmin:a.isAdmin,connectionIds:b?.connectionIds,memberOfSpaceIds:b?.memberOfSpaceIds})}isConnectedTo(a){return this.props.connectionIds.includes(a)}isMemberOf(a){return this.props.memberOfSpaceIds.includes(a)}canViewUserContent(a,b){if(this.props.isAdmin||this.props.userId===a)return!0;switch(b){case"public":return!0;case"campus_only":return this.isAuthenticated;case"connections_only":return this.isConnectedTo(a);default:return!1}}canViewPrivateSpace(a){return!!this.props.isAdmin||this.isMemberOf(a)}canModerateContent(){return this.props.isAdmin||this.props.isModerator}canViewHiddenContent(){return this.props.isAdmin||this.props.isModerator}canViewDeletedContent(){return this.props.isAdmin}getRelationshipTo(a){return this.isAuthenticated?this.isConnectedTo(a)?"connection":"campus":"public"}withConnections(a){return new e({...this.props,connectionIds:[...new Set([...this.props.connectionIds,...a])]})}withSpaceMemberships(a){return new e({...this.props,memberOfSpaceIds:[...new Set([...this.props.memberOfSpaceIds,...a])]})}}},57975:a=>{a.exports=require("node:util")},63033:a=>{a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77598:a=>{a.exports=require("node:crypto")},83341:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{GET:()=>p});var e=c(38929),f=c(91714),g=c(94205),h=c(54760),i=c(87266),j=c(70510),k=c(3893),l=c(56990),m=c(37962),n=a([g,j]);[g,j]=n.then?(await n)():n;let o=h.Ik({limit:h.au.number().min(1).max(50).default(20),offset:h.au.number().min(0).default(0),types:h.Yj().optional(),since:h.Yj().optional(),sortBy:h.k5(["recent","engagement"]).optional().default("recent")}),p=(0,g.lT)(async(a,{params:b},c)=>{let d=(0,g.F6)(a),h=(0,g.rE)(a),{spaceId:n}=await b;if(!n)return c.error("Space ID is required","INVALID_INPUT",{status:i.t3.BAD_REQUEST});let{searchParams:p}=new URL(a.url),{limit:q,offset:r,types:s,since:t,sortBy:u}=o.parse(Object.fromEntries(p.entries())),v=s?s.split(","):["post","event","member_join","tool_deploy","event_rsvp"],w=new Date(t||Date.now()-6048e5),x=(0,j.SN)(),y=await x.findById(n);if(y.isFailure)return c.error("Space not found","RESOURCE_NOT_FOUND",{status:i.t3.NOT_FOUND});let z=y.getValue();if(z.campusId.id!==h)return c.error("Space not found","RESOURCE_NOT_FOUND",{status:i.t3.NOT_FOUND});if((await e.dbAdmin.collection("spaceMembers").where("spaceId","==",n).where("userId","==",d).where("isActive","==",!0).where("campusId","==",h).limit(1).get()).empty&&!z.isPublic)return c.error("You must be a member to view this space feed","FORBIDDEN",{status:i.t3.FORBIDDEN});let A=l.o.authenticated({userId:d,campusId:h,memberOfSpaceIds:[n]});async function B(a){try{let b=await e.dbAdmin.collection("users").doc(a).get();if(!b.exists)return!1;let c=b.data(),d={id:a,ghostMode:c?.ghostMode,visibility:c?.visibility};return k.A.shouldHideActivity(d,A,[n])}catch{return!1}}let C=[];if(v.includes("post"))try{for(let a of(await e.dbAdmin.collection("spaces").doc(n).collection("posts").where("createdAt",">=",w).orderBy("createdAt","desc").limit(q).get()).docs){let b=a.data();if(b.campusId&&b.campusId!==h||(0,m.QE)(b)||await B(b.authorId))continue;let c={id:b.authorId,name:"Unknown User",avatar:void 0,handle:void 0};try{let a=await e.dbAdmin.collection("users").doc(b.authorId).get();if(a.exists){let d=a.data();c={id:b.authorId,name:d?.fullName||"Unknown User",avatar:d?.photoURL,handle:d?.handle}}}catch{f.vF.warn("Failed to fetch post author",{postId:a.id,authorId:b.authorId})}C.push({id:`post_${a.id}`,type:"post",spaceId:n,timestamp:b.createdAt?.toDate?.()?.toISOString()||new Date().toISOString(),user:c,content:{id:a.id,title:b.title,content:b.content,type:b.type,likesCount:b.likesCount||0,repliesCount:b.repliesCount||0,isPinned:b.isPinned||!1},metadata:{isPinned:b.isPinned||!1,isHighlighted:"announcement"===b.type}})}}catch(a){f.vF.warn("Failed to fetch posts for activity feed",{error:{error:a instanceof Error?a.message:String(a)},spaceId:n})}if(v.includes("event"))try{for(let a of(await e.dbAdmin.collection("spaces").doc(n).collection("events").where("createdAt",">=",w).orderBy("createdAt","desc").limit(q).get()).docs){let b=a.data();if(b.campusId&&b.campusId!==h||(0,m.QE)(b)||await B(b.organizerId))continue;let c={id:b.organizerId,name:"Unknown User",avatar:void 0,handle:void 0};try{let a=await e.dbAdmin.collection("users").doc(b.organizerId).get();if(a.exists){let d=a.data();c={id:b.organizerId,name:d?.fullName||"Unknown User",avatar:d?.photoURL,handle:d?.handle}}}catch{f.vF.warn("Failed to fetch event organizer",{eventId:a.id,organizerId:b.organizerId})}C.push({id:`event_${a.id}`,type:"event",spaceId:n,timestamp:b.createdAt?.toDate?.()?.toISOString()||new Date().toISOString(),user:c,content:{id:a.id,title:b.title,description:b.description,startDate:b.startDate?.toDate?.()?.toISOString(),location:b.location,currentAttendees:b.currentAttendees||0,maxAttendees:b.maxAttendees,type:b.type,isFeatured:b.isFeatured||!1},metadata:{isHighlighted:b.isFeatured||!1}})}}catch(a){f.vF.warn("Failed to fetch events for activity feed",{error:{error:a instanceof Error?a.message:String(a)},spaceId:n})}if(v.includes("member_join"))try{for(let a of(await e.dbAdmin.collection("spaceMembers").where("spaceId","==",n).where("isActive","==",!0).where("joinedAt",">=",w).orderBy("joinedAt","desc").limit(q).get()).docs){let b=a.data();if(b.campusId&&b.campusId!==h)continue;let c=b.userId;if(await B(c))continue;let d={id:c,name:"Unknown User",avatar:void 0,handle:void 0};try{let a=await e.dbAdmin.collection("users").doc(c).get();if(a.exists){let b=a.data();d={id:c,name:b?.fullName||"Unknown User",avatar:b?.photoURL,handle:b?.handle}}}catch{f.vF.warn("Failed to fetch member info",{memberId:c})}C.push({id:`member_join_${c}`,type:"member_join",spaceId:n,timestamp:b.joinedAt?.toDate?.()?.toISOString()||new Date().toISOString(),user:d,content:{role:b.role||"member",isNewMember:!0}})}}catch(a){f.vF.warn("Failed to fetch member joins for activity feed",{error:{error:a instanceof Error?a.message:String(a)},spaceId:n})}if(v.includes("tool_deploy"))try{for(let a of(await e.dbAdmin.collection("deployments").where("spaceId","==",n).where("deployedAt",">=",w).orderBy("deployedAt","desc").limit(q).get()).docs){let b=a.data();if(await B(b.userId))continue;let c={id:b.userId,name:"Unknown User",avatar:void 0,handle:void 0};try{let a=await e.dbAdmin.collection("users").doc(b.userId).get();if(a.exists){let d=a.data();c={id:b.userId,name:d?.fullName||"Unknown User",avatar:d?.photoURL,handle:d?.handle}}}catch{f.vF.warn("Failed to fetch deployer info",{deploymentId:a.id,userId:b.userId})}let d="Unknown Tool";try{let a=await e.dbAdmin.collection("tools").doc(b.toolId).get();a.exists&&(d=a.data()?.name||"Unknown Tool")}catch{f.vF.warn("Failed to fetch tool info",{toolId:b.toolId})}C.push({id:`tool_deploy_${a.id}`,type:"tool_deploy",spaceId:n,timestamp:b.deployedAt?.toDate?.()?.toISOString()||new Date().toISOString(),user:c,content:{toolId:b.toolId,toolName:d,deploymentId:a.id,status:b.status,configuration:b.configuration}})}}catch(a){f.vF.warn("Failed to fetch tool deployments for activity feed",{error:{error:a instanceof Error?a.message:String(a)},spaceId:n})}"engagement"===u?C.sort((a,b)=>{let c=a=>{let b,c=a.content;return b=0+(c.likesCount||0)+2*(c.repliesCount||0),a.metadata?.isPinned&&(b+=100),a.metadata?.isHighlighted&&(b+=50),b+=c.currentAttendees||0};return c(b)-c(a)}):C.sort((a,b)=>new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime());let D=C.slice(r,r+q);return c.success({activities:D,total:C.length,hasMore:C.length>r+q,pagination:{limit:q,offset:r,nextOffset:C.length>r+q?r+q:null},summary:{totalActivities:C.length,typeBreakdown:C.reduce((a,b)=>(a[b.type]=(a[b.type]||0)+1,a),{}),lastActivity:C[0]?.timestamp||null},meta:{sortBy:u,sinceDate:w.toISOString(),activityTypes:v}})});d()}catch(a){d(a)}})},86439:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external")}};var b=require("../../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[7545,1684,5524,2845,4760,3272,2269,4205,6513,4918,3928,510],()=>b(b.s=19367));module.exports=c})();